#!/bin/bash
choice=1
while [ $choice -eq 1 ]
do
	read -p "Enter the four details (separated by spaces) " name roll phone address
	details="$name|$roll|$phone|$address"
	echo "$details" >> Students.dat
	echo "Your details have been updated."
	read -p "Press 1 to continue 0 to exit: " choice
done
while [ 1 ] 
	echo "MENU"
	echo "1. Sort the records in reverse order"
	echo "2. REplace lower case letters with upper case letters"
	echo "3. Records with unique names"
	echo "4. Display 2nd and 3rd lines"
	echo ""
do
	read -p "Enter your choice: " ch
	case $ch in
	1)
		sort -t '|' -k 2 -r Students.dat >> sorted.dat
		echo "File after sorting:"
		cat sorted.dat
		;;
	2)
		tr [:lower:] [:upper:] < sorted.dat
		echo "File updated"
		;;
	3)
		list=`cat sorted.dat | sort -t'|' -k1 | cut -d'|' -f1 | uniq -c | tr -s " " | cut -d' ' -f3`
		for i in $list; do
			found=`cat sorted.dat | grep -w "^$i" | head -1`
			echo $found
		done
		;;
	4)
		cat Students.dat | head -n 3 | tail -n 2
		;;
	5)
		exit;;
	*) 
		echo "\n Invalid key "
		;;

esac	
done



// Average.awk

#!/usr/bin/awk -f

BEGIN {
	FS="~" 
	sum=0
	printf "Enter the subject number (1, 2, 3):"
	getline n < "-"
	
}

NR>1 {
	sum=sum+$(n+2)
}

END {
	avg=sum/4
	print "Average: "avg
}


// awk2.awk

#!/usr/bin/awk -f
  
BEGIN {FS="~"; h1=0; h2=0; h3=0}

NR==1 {s1=$3; s2=$4; s3=$5}

NR>1 {if(h1<=$3) {h1=$3; name1=$1}; if(h2<=$4) {h2=$4; name2=$1}; if(h3<=$5) {h3=$5; name3=$1}}

END {printf("Top Scorers:\n\t%s -> %s (%d)\n\t%s -> %s (%d)\n\t%s -> %s (%d)\n",s1,name1,h1,s2,name2,h2,s3,name3,h3)}



// awk1.awk

#!/usr/bin/awk -f

BEGIN {FS="~"; highest=0}; NR>1 {total=$3+$4+$5; if(highest<total) {highest=total; rec=$0}}; END {print rec" Highest marks: "highest}



// Marks.dat

NAME~ROLL~SUB1~SUB2~SUB3
abc~001~50~76~45
pqr~002~90~82~79
mno~003~49~57~66
xyz~004~29~58~70
ijk~005~77~44~96


